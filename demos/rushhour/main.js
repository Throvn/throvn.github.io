!function(e){var t={};function o(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="./",o(o.s=0)}([function(e,t){var o=document.getElementById("cnvs");o.width=630,o.height=630;var n=o.getContext("2d"),s=document.getElementById("modal"),r=new Audio("./audio/tap-mellow.mp3"),i=new Audio("./audio/winning.wav"),l=0;const a=document.createElement("img");a.src="images/wood-bg-bottom.webp",a.onload=function(){n.drawImage(a,0,0,630,630),h()};const p=document.createElement("img");p.src="images/wood-bg-top.webp",p.onload=function(){n.drawImage(p,0,0,630,630),n.clearRect(543,231,45,78)};const c=document.createElement("img");c.src="images/arrow.webp";class u{constructor(e=[],t="blue",o=!1){this.pos=e,this.type=e.length>4?"Truck":"Car",this.color=o?"red":t,this.direction=function(e){for(var t={x:[],y:[]},o=0;o<e.length;o++){var n=e[o],s=e[o+1];t.x.includes(n)||t.x.push(n),t.y.includes(s)||t.y.push(s),o+=1}return t.x.length<t.y.length?"y":"x"}(e),this.red=o}draw(){for(let e=0;e<this.pos.length;e++)n.fillStyle=this.color,n.fillRect(75+78*this.pos[e],75+78*this.pos[e+1],78,78),e+=1}move(e,t,o){var n=Array.from(this.pos);"x"===this.direction?this.pos[0]===e?(this.pos[0]--,this.pos[2]--,"Truck"===this.type&&this.pos[4]--):(this.pos[4]===e&&"Truck"===this.type||this.pos[2]===e&&"Car"===this.type)&&(this.pos[0]++,this.pos[2]++,"Truck"===this.type&&this.pos[4]++):"y"===this.direction&&(this.pos[1]===t?(this.pos[1]--,this.pos[3]--,"Truck"===this.type&&this.pos[5]--):(this.pos[5]===t&&"Truck"===this.type||this.pos[3]===t&&"Car"===this.type)&&(this.pos[1]++,this.pos[3]++,"Truck"===this.type&&this.pos[5]++));for(let e=0;e<this.pos.length;e++){const t=this.pos[e],o=this.pos[e+1];if(t<0||t>5||o<0||o>5)return this.pos=n}for(let e=0;e<g.length;e++){const t=g[e],s="Truck"===this.type?4:3;for(let r=0;r<s;r++){if(o!==e){if(t.pos[r]===this.pos[0]&&t.pos[r+1]===this.pos[1])return this.pos=n;if(t.pos[r]===this.pos[2]&&t.pos[r+1]===this.pos[3])return this.pos=n;if("Truck"===this.type&&t.pos[r]===this.pos[4]&&t.pos[r+1]===this.pos[5])return this.pos=n;if("Truck"===t.type&&t.pos[4]===this.pos[r]&&t.pos[5]===this.pos[r+1])return this.pos=n;if("Truck"===t.type&&"Truck"===this.type&&t.pos[4]===this.pos[4]&&t.pos[5]===this.pos[5])return this.pos=n}r+=1}}!0!==this.red||5!==this.pos[0]&&5!==this.pos[2]||2!==this.pos[1]&&2!==this.pos[3]||(document.getElementById("header").innerText="You Won",s.classList="modal show",i.play()),l++,document.getElementById("move").innerText=l,r.play(),h()}}function h(){n.fillStyle="#1f2125",n.fillRect(0,0,630,630),n.drawImage(a,0,0,630,630),n.strokeStyle="white";for(let e=0;e<6;e++)for(let t=0;t<6;t++)n.strokeRect(75+78*e,75+78*t,78,78);g.forEach(e=>{e.draw()}),n.drawImage(p,0,0,630,630),n.clearRect(543,231,45,78)}var d=[[new u([2,5,3,5,4,5],"lightgreen"),new u([0,4,0,5],"orange"),new u([0,1,0,2,0,3],"violet"),new u([4,4,5,4],"lightblue"),new u([0,0,1,0],"green"),new u([3,1,3,2,3,3],"blue"),new u([5,0,5,1,5,2],"yellow"),new u([1,2,2,2],void 0,!0)],[new u([3,0,4,0,5,0],"yellow"),new u([3,1,3,2],"orange"),new u([5,1,5,2,5,3],"purple"),new u([4,2,4,3],"lightblue"),new u([4,4,5,4],"darkblue"),new u([0,3,1,3,2,3],"blue"),new u([0,0,0,1],"darkgreen"),new u([3,5,4,5],"lightgray"),new u([2,4,2,5],"pink"),new u([0,5,1,5],"lightgreen"),new u([0,2,1,2],void 0,!0)],[new u([3,2,3,3,3,4],"yellow"),new u([1,3,2,3],"darkgreen"),new u([5,3,5,4,5,5],"purple"),new u([1,4,1,5],"orange"),new u([2,5,3,5],"lightblue"),new u([1,2,2,2],void 0,!0)],[new u([0,0,0,1,0,2],"yellow"),new u([2,3,2,4],"orange"),new u([3,0,3,1,3,2],"purple"),new u([5,4,5,5],"lightblue"),new u([3,3,4,3,5,3],"blue"),new u([1,0,2,0],"darkgreen"),new u([2,5,3,5,4,5],"lightgreen"),new u([1,2,2,2],void 0,!0)]],f=Math.floor(Math.random()*d.length),g=JSON.parse(JSON.stringify(d[f])).map(e=>new u(e.pos,e.color,e.red));function w(e,t){for(let r=0;r<g.length;r++)for(var o=0;o<g[r].pos.length;o++){var n=g[r].pos[o],s=g[r].pos[o+1];if(e===n&&t===s)return[e,t,r];o+=1}}function m(e){var t=e.offsetX,o=e.offsetY;switch(!0){case t>465&&t<543:t=5;break;case t>387&&t<465:t=4;break;case t>309&&t<387:t=3;break;case t>231&&t<309:t=2;break;case t>153&&t<231:t=1;break;case t>75&&t<153:t=0;break;default:return}switch(!0){case o>465&&o<543:o=5;break;case o>387&&o<465:o=4;break;case o>309&&o<387:o=3;break;case o>231&&o<309:o=2;break;case o>153&&o<231:o=1;break;case o>75&&o<153:o=0;break;default:return}return[t,o]}function y(e,t,o,s,r,i){n.save(),n.translate(t+s/2,o+r/2),n.rotate(i*Math.PI/180),n.translate(-t-s/2,-o-r/2),n.drawImage(e,t,o,s,r),n.restore()}function b(e){h();var t=m(e);if(void 0===t)return;var o=w(t[0],t[1]);if(void 0===o)return;var s=g[o[2]];n.fillStyle="black";"y"===s.direction?(y(c,75+78*s.pos[0]+39-25,78*s.pos[1]+1+75+39-20,50,40,90),y(c,75+78*s.pos[s.pos.length-2]+39-25,78*s.pos[s.pos.length-1]+1+75+39-20,50,40,-90)):"x"===s.direction&&(y(c,75+78*s.pos[0]+39-25,78*s.pos[1]+1+75+39-20,50,40,0),y(c,75+78*s.pos[s.pos.length-2]+39-25,78*s.pos[s.pos.length-1]+1+75+39-20,50,40,-180))}o.onclick=function(e){var t=m(e),o=w(t[0],t[1]);void 0!==o&&(g[o[2]].move(o[0],o[1],o[2]),b(e))},o.onmousemove=b,document.body.onkeypress=function(e){console.log(e),"q"!==e.key&&"esc"!==e.key||(s.classList="modal hide")},document.getElementById("nxtLvl").onclick=function(e){for(;;){var t=Math.floor(Math.random()*d.length);if(t!==f){f=t,g=JSON.parse(JSON.stringify(d[t])).map(e=>new u(e.pos,e.color,e.red)),l=0;break}}h(),s.classList="modal hide"},document.getElementById("playAgain").onclick=function(e){l=0,console.log(f,d[f]==g),g=JSON.parse(JSON.stringify(d[f])).map(e=>new u(e.pos,e.color,e.red)),h(),document.getElementById("move").textContent=l,s.classList="modal hide"},window.requestAnimationFrame(h)}]);